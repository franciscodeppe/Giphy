<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.8.0/css/bootstrap-slider.css">
	<link rel="stylesheet" href="styles.css">
</head>

<body>
	<div class="container">
		<div id="buttons"></div>
	</div>
	<div class="col-lg-4 panel">
		<div class="row">
			<input id="gif_slider" type="text" data-slider-min="1" data-slider-max="15" data-slider-step="1" data-slider-value="1" /><br>
			<span class="sliders" id="GifCurrentSliderValLabel">Gif Number:<span id="GifSliderVal"></span></span><br>
		</div>
		<div class="row">
			<input id="rating_slider" type="text" data-slider-min="1" data-slider-max="5" data-slider-step="1" data-slider-value="1" /><br>
			<span class="sliders" id="RatingCurrentSliderValLabel">Rating: <span id="RatingSliderVal"></span></span><br>
		</div>



		<form class="form-group" id="gif-form">

			<label for="gif-input">Add some feels</label>
			<input type="text" id="git-input">
			<input id="add-gif" type="submit" value="Add some feels">

		</form>
	</div>
	<div class="container">
		<div id="gifs"></div>
	</div>

	<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.8.0/bootstrap-slider.js"></script>
	<script type="text/javascript">
		var topics = ["happy", "sad", "laughing", "angry", "dumb", "confused", "annoyed", "tired", "finished"]
		var apiKey = "dc6zaTOxFJmzC"
		var num;
		var search;
		var animate;
		var still;



		$("#rating_slider").slider();
		$("#rating_slider").on("slide", function(slideEvt) {
			var ratings = ["G", "PG", "PG-13", "R", "R+"];
			var n = slideEvt.value - 1;
			$("#RatingSliderVal").text(ratings[n]);
		});

		$("#gif_slider").slider();
		$("#gif_slider").on("slide", function(slideEvt) {
			$("#GifSliderVal").text(slideEvt.value);
		});

		function addButtons() {
			for (var i = 0; i < topics.length; i++) {
				var $buttons = $('<button>')
				$($buttons).text(topics[i])
				$($buttons).addClass('btn btn-primary')
				$("#buttons").append($buttons)
			}
		}
		addButtons()

		$("#buttons").on("click", "button", function() {

			search = ($(this)[0].innerHTML)
			console.log(search)

			var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + search + "&api_key=" + apiKey + "&limit=" + num;

			$.ajax({
				url: queryURL,
				method: "GET"
			}).done(function(response) {
				$("#gifs").empty()

				var gifDiv = $("<div>");

				for (var i = 0; i < response.data.length; i++) {
					still = response.data[i].images.fixed_height_still.url;
					animate = response.data[i].images.fixed_height.url;
					var gifImage = $("<img>");
					$(gifImage).attr("src", still)
					$(gifDiv).append(gifImage);
					$(document).on("click", "img", function() {
						if (gifImage.attr("src") === still) {
							$(this).attr("src", animate)
						} else {
							$(this).attr("src", still)
						}
					})
				}

				$("#gifs").append(gifDiv)

				console.log(response.data)
				console.log(queryURL)
			})

			$("#buttons").empty()
			addButtons()
		});
	</script>
</body>

</html>
